#!/usr/bin/env bash

# Obtain node adresses
IPADDR=$(hostname -I)
# Get only our network address
IPADDR=${IPADDR#*"192.168.12."}
# Get only last 3 digits of IP address
IPADDR=${IPADDR:0:3}

# Remove first 3 characters from APP_DIR string to get the app name
APP_DIR = $APP
APP_NAME=${APP_DIR:3}
echo "Testing $APP application on node $IPADDR"

# Start the experiment
LOCATION = "/root/logatec-experiment/applications/$APP_DIR"
cd $LOCATION
python3 $APP_NAME.py
# TODOB: fix the app so it can be run manually (if __name__ == "__main__":)

# Move results and logs
mv *.txt /root/logatec-experiment/results/
mv *.log /root/logatec-experiment/results/